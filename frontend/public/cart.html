<!DOCTYPE html>
<html lang="th" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ตะกร้าสินค้า - TANYARAT COSMETICS</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans+Thai:300,400,500,600,700&amp;display=swap">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <!-- Theme CSS -->
    <link rel="stylesheet" href="assets/css/theme.css">
    <!-- Custom CSS for Cart -->
    <link rel="stylesheet" href="assets/css/cart.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-md sticky-top navbar-shrink py-3 navbar-light" id="mainNav">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="index.html">
                 <span class="bs-icon-sm bs-icon-circle bs-icon-primary shadow d-flex justify-content-center align-items-center me-2 bs-icon">
                     <img class="rounded-circle flex-shrink-0 me-3 fit-cover" width="75" height="75" src="assets/img/team/S__9469964_0.jpg">
                 </span>
                <span style="font-weight: 600; letter-spacing: 1px;">TANYARAT</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">หน้าแรก</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="shop.html">สินค้า</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">เกี่ยวกับเรา</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">ติดต่อเรา</a>
                    </li>
                </ul>
                <div class="d-flex">
                    <a href="/api/shop/cart" class="btn btn-primary shadow me-2">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count-badge badge bg-danger rounded-pill">0</span>
                    </a>
                    <a href="login.html" class="btn btn-outline-secondary me-2 d-none" id="navLogin">เข้าสู่ระบบ</a>
                    <a href="register.html" class="btn btn-secondary d-none" id="navRegister">สมัครสมาชิก</a>
                    <div class="nav-item dropdown d-none" id="navAccount">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user me-1"></i> บัญชี
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="account.html">ข้อมูลบัญชี</a></li>
                            <li><a class="dropdown-item" href="#" id="logoutButton">ออกจากระบบ</a></li>
                        </ul>
                    </div>
                    <a href="admin.html" class="btn btn-outline-danger d-none" id="navAdmin">จัดการระบบ</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="bg-primary-gradient text-white text-center py-5">
        <div class="container">
            <h1>ตะกร้าสินค้า</h1>
            <p>รายการสินค้าที่คุณเลือกซื้อ</p>
        </div>
    </section>

    <!-- Cart Content -->
    <section class="cart-container">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <!-- Empty Cart Message (will be shown/hidden with JS) -->
                    <div id="empty-cart-message" class="empty-cart d-none">
                        <div class="empty-cart-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <h3>ตะกร้าสินค้าของคุณว่างเปล่า</h3>
                        <p>กรุณาเลือกสินค้าเพื่อเพิ่มลงในตะกร้า</p>
                        <a href="shop.html" class="btn btn-primary continue-shopping">
                            เลือกซื้อสินค้าต่อ
                        </a>
                    </div>

                    <!-- Cart Items (will be populated with JS) -->
                    <div id="cart-items-container">
                        <!-- Items will be added here dynamically -->
                    </div>
                </div>

                <div class="col-lg-4">
                    <!-- Cart Summary -->
                    <div class="cart-summary">
                        <h4 class="summary-title">สรุปคำสั่งซื้อ</h4>
                        
                        <div class="summary-row">
                            <span>ราคาสินค้าทั้งหมด</span>
                            <span id="cart-subtotal">฿0.00</span>
                        </div>
                        
                        <div class="summary-row">
                            <span>ค่าจัดส่ง</span>
                            <span id="shipping-cost">฿50.00</span>
                        </div>
                        
                        <div class="summary-row summary-total">
                            <span>ยอดรวมทั้งสิ้น</span>
                            <span id="cart-total">฿0.00</span>
                        </div>
                        
                        <button id="checkout-btn" class="btn btn-primary checkout-btn">
                            ดำเนินการสั่งซื้อ
                        </button>
                        
                        <!-- Promo Code Section -->
                        <div class="promo-code">
                            <h5>รหัสส่วนลด</h5>
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="กรอกรหัสส่วนลด">
                                <button class="btn btn-outline-primary" type="button">ใช้</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-primary-gradient pt-5">
        <div class="container py-4 py-lg-5">
             <div class="row g-5">
                 <div class="col-lg-4">
                     <div class="mb-4">
                         <div class="d-flex align-items-center mb-3">
                             <img class="rounded-circle me-3" width="50" height="50" src="assets/img/team/S__9469964_0.jpg">
                             <h4 class="fw-bold mb-0 text-white">TANYARAT</h4>
                         </div>
                         <p class="text-white-50 mb-4">เราพร้อมดูแลร่างกายของคุณเสมือนญาติของเรา ให้ผลิตภัณฑ์ธัญญรัตน์ดูแลคุณ</p>
                         <div class="d-flex">
                             <a href="#" class="btn btn-outline-light btn-sm me-2"><i class="fa fa-facebook"></i></a>
                             <a href="#" class="btn btn-outline-light btn-sm me-2"><i class="fa fa-instagram"></i></a>
                             <a href="#" class="btn btn-outline-light btn-sm"><i class="fa fa-line"></i></a>
                         </div>
                     </div>
                 </div>
                 
                 <div class="col-lg-2 col-md-4">
                     <h5 class="fw-bold mb-4 text-white">บริการ</h5>
                     <ul class="list-unstyled">
                         <li class="mb-2"><a href="shop.html" class="text-decoration-none text-white-50">สินค้า</a></li>
                         <li class="mb-2"><a href="#" class="text-decoration-none text-white-50">เสริมความงาม</a></li>
                         <li class="mb-2"><a href="projects.html" class="text-decoration-none text-white-50">การออกงาน</a></li>
                     </ul>
                 </div>
                 
                 <div class="col-lg-2 col-md-4">
                     <h5 class="fw-bold mb-4 text-white">เกี่ยวกับ</h5>
                     <ul class="list-unstyled">
                         <li class="mb-2"><a href="#" class="text-decoration-none text-white-50">เกี่ยวกับเรา</a></li>
                         <li class="mb-2"><a href="#" class="text-decoration-none text-white-50">ทีมงาน</a></li>
                     </ul>
                 </div>
                 
                 <div class="col-lg-4 col-md-4">
                     <h5 class="fw-bold mb-4 text-white">ติดต่อเรา</h5>
                      <ul class="list-unstyled">
                         <li class="mb-2 text-white-50"><i class="fa fa-map-marker me-2"></i> 114 หมู่ 8 ต.ค่ายบกหวาน อ.เมือง จ.หนองคาย 43100</li>
                         <li class="mb-2 text-white-50"><i class="fa fa-phone me-2"></i> 091-898-1595</li>
                         <li class="mb-2 text-white-50"><i class="fa fa-line me-2"></i> kaii8-114</li>
                      </ul>
                 </div>
             </div>
             
             <hr class="my-4 text-white-50">
             
             <div class="d-flex flex-column flex-lg-row justify-content-between align-items-center">
                 <p class="text-white-50 mb-lg-0">© 2024 TANYARAT. สงวนลิขสิทธิ์.</p>
                 <div>
                     <a href="#" class="text-decoration-none text-white-50 me-3">นโยบายความเป็นส่วนตัว</a>
                     <a href="#" class="text-decoration-none text-white-50">เงื่อนไขการใช้บริการ</a>
                 </div>
             </div>
        </div>
    </footer>

    <!-- Cart Item Template (hidden) -->
    <template id="cart-item-template">
        <div class="cart-item" data-product-id="">
            <div class="row align-items-center">
                <div class="col-md-2">
                    <img src="" alt="" class="cart-item-image img-fluid">
                </div>
                <div class="col-md-4">
                    <h5 class="cart-item-title"></h5>
                    <div class="cart-item-price"></div>
                </div>
                <div class="col-md-6">
                    <div class="cart-item-actions">
                        <div class="quantity-control">
                            <button class="quantity-btn decrease-btn">-</button>
                            <input type="number" min="1" value="1" class="quantity-input">
                            <button class="quantity-btn increase-btn">+</button>
                        </div>
                        <button class="remove-btn">
                            <i class="fas fa-trash-alt"></i> ลบ
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!-- Bootstrap Bundle with Popper -->
    <script src="assets/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- Cart Logic JS -->
    <script src="assets/js/cart.js"></script>
    <!-- Common JS (for navbar login state) -->
    <script src="assets/js/common.js"></script>
    <!-- Custom JS for this page -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Function to format price in Thai Baht
            function formatPrice(price) {
                return '฿' + parseFloat(price).toFixed(2);
            }
            
            // Function to render cart items
            function renderCart() {
                const cart = getCart();
                const cartItemsContainer = document.getElementById('cart-items-container');
                const emptyCartMessage = document.getElementById('empty-cart-message');
                const cartItemTemplate = document.getElementById('cart-item-template');
                const checkoutBtn = document.getElementById('checkout-btn');
                
                // Clear previous items
                cartItemsContainer.innerHTML = '';
                
                // Show/hide empty cart message
                if (cart.length === 0) {
                    emptyCartMessage.classList.remove('d-none');
                    cartItemsContainer.classList.add('d-none');
                    checkoutBtn.disabled = true;
                } else {
                    emptyCartMessage.classList.add('d-none');
                    cartItemsContainer.classList.remove('d-none');
                    checkoutBtn.disabled = false;
                    
                    // Add cart items
                    cart.forEach(item => {
                        const cartItemNode = document.importNode(cartItemTemplate.content, true);
                        const cartItem = cartItemNode.querySelector('.cart-item');
                        
                        cartItem.dataset.productId = item.id;
                        cartItem.querySelector('.cart-item-image').src = item.image;
                        cartItem.querySelector('.cart-item-image').alt = item.name;
                        cartItem.querySelector('.cart-item-title').textContent = item.name;
                        cartItem.querySelector('.cart-item-price').textContent = formatPrice(item.price);
                        cartItem.querySelector('.quantity-input').value = item.quantity;
                        
                        // Add event listeners
                        cartItem.querySelector('.increase-btn').addEventListener('click', function() {
                            const input = this.parentNode.querySelector('.quantity-input');
                            const newQuantity = parseInt(input.value) + 1;
                            input.value = newQuantity;
                            updateCartItemQuantity(item.id, newQuantity);
                            updateCartSummary();
                        });
                        
                        cartItem.querySelector('.decrease-btn').addEventListener('click', function() {
                            const input = this.parentNode.querySelector('.quantity-input');
                            const newQuantity = Math.max(1, parseInt(input.value) - 1);
                            input.value = newQuantity;
                            updateCartItemQuantity(item.id, newQuantity);
                            updateCartSummary();
                        });
                        
                        cartItem.querySelector('.quantity-input').addEventListener('change', function() {
                            const newQuantity = Math.max(1, parseInt(this.value));
                            this.value = newQuantity;
                            updateCartItemQuantity(item.id, newQuantity);
                            updateCartSummary();
                        });
                        
                        cartItem.querySelector('.remove-btn').addEventListener('click', function() {
                            removeFromCart(item.id);
                            renderCart();
                            updateCartSummary();
                        });
                        
                        cartItemsContainer.appendChild(cartItemNode);
                    });
                }
                
                // Update cart summary
                updateCartSummary();
            }
            
            // Function to update cart summary
            function updateCartSummary() {
                const subtotalElement = document.getElementById('cart-subtotal');
                const shippingCostElement = document.getElementById('shipping-cost');
                const totalElement = document.getElementById('cart-total');
                
                const subtotal = getCartTotal();
                const shippingCost = subtotal > 0 ? 50 : 0; // ค่าจัดส่ง 50 บาท ถ้ามีสินค้าในตะกร้า
                const total = subtotal + shippingCost;
                
                subtotalElement.textContent = formatPrice(subtotal);
                shippingCostElement.textContent = formatPrice(shippingCost);
                totalElement.textContent = formatPrice(total);
            }
            
            // Checkout button event
            document.getElementById('checkout-btn').addEventListener('click', function() {
                if (getCart().length > 0) {
                    window.location.href = 'checkout.html';
                }
            });
            
            // Initialize cart display
            renderCart();
        });
    </script>
</body>
</html> 